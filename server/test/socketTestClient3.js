const { io } = require("socket.io-client");

const socket = io("http://localhost:8080", {
  auth: {
    token:
      "eyJraWQiOiJKUnJJVTIra1pGNERDU3MxcUowOVhxbnNPUHRibzVMYmZvR21FRVNJM3lJPSIsImFsZyI6IlJTMjU2In0.eyJhdF9oYXNoIjoiZUlBZDhwN1JTdjZRZEJMRHQ2cHNQdyIsInN1YiI6ImUxY2IyNTcwLTIwNzEtNzBkZS1kOTNiLWQ1OTQzOGVjY2M2ZSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0yLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMl9nQlhBVk1YVUsiLCJjb2duaXRvOnVzZXJuYW1lIjoiZTFjYjI1NzAtMjA3MS03MGRlLWQ5M2ItZDU5NDM4ZWNjYzZlIiwiZ2l2ZW5fbmFtZSI6Ild1IiwiYXVkIjoiM205dXR0cDgyZ2dmOGd1NjJsbTEyZWE3ajYiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTc1MjE2OTczOCwiZXhwIjoxNzUyMTczMzM4LCJpYXQiOjE3NTIxNjk3MzgsImZhbWlseV9uYW1lIjoiTGlsbHkiLCJqdGkiOiIyZDcwYzk0NS05NGFkLTRhMTgtOTU3Ny0yNjM4NzI2ZDE1ZjUiLCJlbWFpbCI6ImxpbGx5d3UyNDY4QGdtYWlsLmNvbSJ9.cQXbA-I_tQjY87cSuJzKjit0XSqk1mu5iyrR5VPZdsKHZu83KPtAcwwN-iqnjRQ7zqLuoKcNvHFiag0_QjdbQMY1EgEqSaKeqbwv7f6ZrYaSK6XSer30RrSnQTgqcPBExKsT3FOOt6zqhR1uoD4DElpAzJwGJQV9s2A4rTLWUCOzqhf-H1IY6UtbQ-ctrnOEqw3Z4sFXwAKeYr3zchiWbypsbYSuSflNJraUZAProWd1r4pzpl2zBrVZYc9FU_M1UjPBsn_R2Q87hDkqAeTzqsY0AKnNiXcCQiMPFgLs4VtUfGW6Fbiu6f2CJIgPAqazeqQAtHpJ4qr18XMX0qZwsA&access_token=eyJraWQiOiI2WXk1UGI2SEhoN2plZTBEZDJ5ZzB0MHlRZUtGK3lIQlpTZnoxQ0IycVlZPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiJlMWNiMjU3MC0yMDcxLTcwZGUtZDkzYi1kNTk0MzhlY2NjNmUiLCJ0b2tlbl91c2UiOiJhY2Nlc3MiLCJzY29wZSI6InBob25lIG9wZW5pZCBwcm9maWxlIGVtYWlsIiwiYXV0aF90aW1lIjoxNzUyMTY5NzM4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0yLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMl9nQlhBVk1YVUsiLCJleHAiOjE3NTIxNzMzMzgsImlhdCI6MTc1MjE2OTczOCwidmVyc2lvbiI6MiwianRpIjoiMWNkMzBhY2YtZDNmZC00MTM0LTkyYWUtYjNhYWZlNzcwN2NmIiwiY2xpZW50X2lkIjoiM205dXR0cDgyZ2dmOGd1NjJsbTEyZWE3ajYiLCJ1c2VybmFtZSI6ImUxY2IyNTcwLTIwNzEtNzBkZS1kOTNiLWQ1OTQzOGVjY2M2ZSJ9.A5bW59Add71EygYzUGBR5nB-u_rVjic0aUHme0QOeGhnwyd5ubAB43N4vXaEUeqrVCnuYDyb56wgsyY1Vs7q5ONqX9Q2X8JOO_d774AQbhnoQ4ve5QAihQfWq88nlYBeZYBsbekKgXtbmpfpcWpEQbnSc7ZepME5-2khJjSvF--TMU8CyI-H3tiud82SnLnbcYPoK7SvpReKdJmlgz9m9XLNwItHA-HhJJmD_BuatUOMK17xVAq4bBDv2ZM4QKUOcIoNkPARR5qx6jwCveEE-yQabvv397xxEjMujrfimhYARRaB0mRzOPEn5w7gD4r1fKJwGcIlZUjFwFLKHvCAUg",
  },
});

socket.emit("join_chat", {
  chatId: "room-B",
  timestamp: new Date().toISOString(),
});

socket.on("receive_message", (msg) => {
  console.log("[User C received]", msg);
});
